TODO sketch for this branch, in rough priority order:

- Update proposal
-- Switch from sending state machines to requesting a "menu option" of state
   machine.

- Clean up/fix XXX's and FIXMEs
  - Fix timer flapping in tests (mock monotime for libevent?)
  - Test SMARTLIST_FOREACH_REVERSE_BEGIN()
  - Tests for circuit getting marked or freed before callback.
  - Tests for detecting padding from wrong hop
  - Tests for machine replacement on all conditions
  - Tests for STATE_END teardown due to infinity, bins_empty, and/or length
    with pending timers, new machines, etc.
  - Tests for consensus and machine rate limiting
  - Test all types of token removal
  - Go down dist precision rabbithole and comment
  - Tests for dists, length and iat sampling
  - Better test coverage in general

- Remaining relay_early_cell condition?
  - This would allow another way to start/stop circuit setup machines.
  - circpad_circuit_state_t RELAY_EARLY_LEFT instead of BUILDING?
  - Or NO_RELAY_EARLY_LEFT?
  - Also deliver an event for this?

- Does it even make sense to provide an option to destroy machines when
  they hit END? Why wouldn't such machines go back to START?
  - If their conditions still apply, they are going to be restarted anyway
    after being torn down.

- Nick's API doc
  - Consider how we'd use it.

- Vanguards compatibility for MiddleNodes (via changes to vanguards addon)

- Rephist timer stats
  - Is this a privacy risk? The adversary could create lots of circuits
    to find a layer2 vanguard.. Otherwise they will be spread across middles.

- Determine good hardcoded/example histograms

- Specify target circuit lifetime?

- Specify ports for machine??

- circpad_machine_validate() function to sanity-check histograms loaded from
  consensus/torrc.

- Support torrc load+serialization of state machines
  - ??

- Support consensus load+serialization of state machines
  - ??

======== 0.3.6 ========

- Come up with some good histograms for eg circuit setup fingerprinting,
  website fingerprinting, and vanguards usage.
- Experiment with run-length histograms and other histogram/distribution
  encoding methods.
